{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport React, { createContext, useContext, useReducer, useEffect } from 'react';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { mockPatients } from \"../data/mockData\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar initialState = {\n  user: {\n    level: 1,\n    xp: 0,\n    maxXp: 100,\n    coins: 50,\n    streak: 0,\n    lastPlayedDate: null,\n    isPremium: false,\n    casesCompleted: 0,\n    totalQuestions: 0,\n    correctDiagnoses: 0,\n    unlockedSkins: ['default'],\n    settings: {\n      theme: 'light',\n      fontSize: 'medium',\n      soundEnabled: true,\n      vibrationEnabled: true,\n      notificationsEnabled: true\n    }\n  },\n  cases: [],\n  currentCase: null,\n  isLoading: true\n};\nvar appReducer = function appReducer(state, action) {\n  var _state$currentCase;\n  switch (action.type) {\n    case 'SET_LOADING':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        isLoading: action.payload\n      });\n    case 'SET_USER':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        user: _objectSpread(_objectSpread({}, state.user), action.payload)\n      });\n    case 'SET_CASES':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        cases: action.payload\n      });\n    case 'ADD_CASE':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        cases: [].concat(_toConsumableArray(state.cases), [action.payload])\n      });\n    case 'UPDATE_CASE':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        cases: state.cases.map(function (case_) {\n          return case_.id === action.payload.id ? _objectSpread(_objectSpread({}, case_), action.payload.updates) : case_;\n        }),\n        currentCase: ((_state$currentCase = state.currentCase) == null ? void 0 : _state$currentCase.id) === action.payload.id ? _objectSpread(_objectSpread({}, state.currentCase), action.payload.updates) : state.currentCase\n      });\n    case 'SET_CURRENT_CASE':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        currentCase: action.payload\n      });\n    case 'ADD_XP':\n      var newXp = state.user.xp + action.payload;\n      var newLevel = state.user.level;\n      var newMaxXp = state.user.maxXp;\n      if (newXp >= newMaxXp) {\n        newLevel += 1;\n        newMaxXp = Math.floor(newMaxXp * 1.2);\n      }\n      return _objectSpread(_objectSpread({}, state), {}, {\n        user: _objectSpread(_objectSpread({}, state.user), {}, {\n          xp: newXp,\n          level: newLevel,\n          maxXp: newMaxXp\n        })\n      });\n    case 'REMOVE_CASE':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        cases: state.cases.filter(function (case_) {\n          return case_.id !== action.payload;\n        })\n      });\n    case 'ADD_COINS':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        user: _objectSpread(_objectSpread({}, state.user), {}, {\n          coins: state.user.coins + action.payload\n        })\n      });\n    case 'SPEND_COINS':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        user: _objectSpread(_objectSpread({}, state.user), {}, {\n          coins: Math.max(0, state.user.coins - action.payload)\n        })\n      });\n    case 'UPDATE_STREAK':\n      var today = new Date().toDateString();\n      var lastPlayed = state.user.lastPlayedDate;\n      var newStreak = state.user.streak;\n      if (lastPlayed) {\n        var lastDate = new Date(lastPlayed);\n        var yesterday = new Date();\n        yesterday.setDate(yesterday.getDate() - 1);\n        if (lastDate.toDateString() === yesterday.toDateString()) {\n          newStreak += 1;\n        } else if (lastDate.toDateString() !== today) {\n          newStreak = 1;\n        }\n      } else {\n        newStreak = 1;\n      }\n      return _objectSpread(_objectSpread({}, state), {}, {\n        user: _objectSpread(_objectSpread({}, state.user), {}, {\n          streak: newStreak,\n          lastPlayedDate: today\n        })\n      });\n    case 'COMPLETE_CASE':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        user: _objectSpread(_objectSpread({}, state.user), {}, {\n          casesCompleted: state.user.casesCompleted + 1,\n          correctDiagnoses: action.payload.correct ? state.user.correctDiagnoses + 1 : state.user.correctDiagnoses,\n          xp: state.user.xp + action.payload.xpGained,\n          coins: state.user.coins + action.payload.coinsGained\n        }),\n        cases: state.cases.map(function (case_) {\n          return case_.id === action.payload.caseId ? _objectSpread(_objectSpread({}, case_), {}, {\n            status: 'completed'\n          }) : case_;\n        })\n      });\n    default:\n      return state;\n  }\n};\nvar AppContext = createContext(null);\nexport var useApp = function useApp() {\n  var context = useContext(AppContext);\n  if (!context) {\n    throw new Error('useApp debe ser usado dentro de AppProvider');\n  }\n  return context;\n};\nexport var AppProvider = function AppProvider(_ref) {\n  var children = _ref.children;\n  var _useReducer = useReducer(appReducer, initialState),\n    _useReducer2 = _slicedToArray(_useReducer, 2),\n    state = _useReducer2[0],\n    dispatch = _useReducer2[1];\n  var generateId = function generateId() {\n    return Math.random().toString(36).substr(2, 9);\n  };\n  var createNewCase = function createNewCase(patient) {\n    var difficulty = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'normal';\n    var isFromFamily = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    var newCase = {\n      id: generateId(),\n      patient: patient,\n      messages: [],\n      status: 'new',\n      difficulty: difficulty,\n      lastMessage: '',\n      lastMessageTime: '',\n      unreadCount: 0,\n      sessions: 0,\n      questionsThisSession: 0,\n      backstoryRevealed: false,\n      selectedSymptoms: [],\n      notes: [],\n      diagnosis: null,\n      diagnosisCorrect: null,\n      treatment: null,\n      treatmentSentDate: null,\n      batteryApplied: null,\n      batteryResults: null,\n      sessionId: null,\n      isFromFamily: isFromFamily,\n      rapport: difficulty === 'realista' ? 50 : 70,\n      createdAt: new Date().toISOString()\n    };\n    return newCase;\n  };\n  var addMessage = function addMessage(caseId, message) {\n    var case_ = state.cases.find(function (c) {\n      return c.id === caseId;\n    });\n    if (case_) {\n      var updatedMessages = [].concat(_toConsumableArray(case_.messages), [message]);\n      dispatch({\n        type: 'UPDATE_CASE',\n        payload: {\n          id: caseId,\n          updates: {\n            messages: updatedMessages,\n            lastMessage: message.text,\n            lastMessageTime: new Date().toLocaleTimeString()\n          }\n        }\n      });\n    }\n  };\n  useEffect(function () {\n    var loadData = function () {\n      var _ref2 = _asyncToGenerator(function* () {\n        try {\n          var userData = yield AsyncStorage.getItem('@psykat_user');\n          if (userData) {\n            dispatch({\n              type: 'SET_USER',\n              payload: JSON.parse(userData)\n            });\n          }\n          var casesData = yield AsyncStorage.getItem('@psykat_cases');\n          if (casesData) {\n            dispatch({\n              type: 'SET_CASES',\n              payload: JSON.parse(casesData)\n            });\n          } else {\n            var initialCases = mockPatients.slice(0, 3).map(function (patient) {\n              return createNewCase(patient);\n            });\n            dispatch({\n              type: 'SET_CASES',\n              payload: initialCases\n            });\n          }\n        } catch (error) {\n          console.error('Error cargando datos:', error);\n        } finally {\n          dispatch({\n            type: 'SET_LOADING',\n            payload: false\n          });\n        }\n      });\n      return function loadData() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    loadData();\n  }, []);\n  useEffect(function () {\n    var saveData = function () {\n      var _ref3 = _asyncToGenerator(function* () {\n        try {\n          yield AsyncStorage.setItem('@psykat_user', JSON.stringify(state.user));\n          yield AsyncStorage.setItem('@psykat_cases', JSON.stringify(state.cases));\n        } catch (error) {\n          console.error('Error guardando datos:', error);\n        }\n      });\n      return function saveData() {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n    if (!state.isLoading) {\n      saveData();\n    }\n  }, [state.user, state.cases, state.isLoading]);\n  return _jsx(AppContext.Provider, {\n    value: {\n      state: state,\n      dispatch: dispatch,\n      addMessage: addMessage,\n      createNewCase: createNewCase,\n      generateId: generateId\n    },\n    children: children\n  });\n};","map":{"version":3,"names":["React","createContext","useContext","useReducer","useEffect","AsyncStorage","mockPatients","jsx","_jsx","initialState","user","level","xp","maxXp","coins","streak","lastPlayedDate","isPremium","casesCompleted","totalQuestions","correctDiagnoses","unlockedSkins","settings","theme","fontSize","soundEnabled","vibrationEnabled","notificationsEnabled","cases","currentCase","isLoading","appReducer","state","action","_state$currentCase","type","_objectSpread","payload","concat","_toConsumableArray","map","case_","id","updates","newXp","newLevel","newMaxXp","Math","floor","filter","max","today","Date","toDateString","lastPlayed","newStreak","lastDate","yesterday","setDate","getDate","correct","xpGained","coinsGained","caseId","status","AppContext","useApp","context","Error","AppProvider","_ref","children","_useReducer","_useReducer2","_slicedToArray","dispatch","generateId","random","toString","substr","createNewCase","patient","difficulty","arguments","length","undefined","isFromFamily","newCase","messages","lastMessage","lastMessageTime","unreadCount","sessions","questionsThisSession","backstoryRevealed","selectedSymptoms","notes","diagnosis","diagnosisCorrect","treatment","treatmentSentDate","batteryApplied","batteryResults","sessionId","rapport","createdAt","toISOString","addMessage","message","find","c","updatedMessages","text","toLocaleTimeString","loadData","_ref2","_asyncToGenerator","userData","getItem","JSON","parse","casesData","initialCases","slice","error","console","apply","saveData","_ref3","setItem","stringify","Provider","value"],"sources":["C:/Users/macer/Desktop/MAC/APP/PSKYAT/PSYKAT3.0/react/src/contexts/AppContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useReducer, useEffect, ReactNode } from 'react';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { User, Case, Patient, Message, CaseDifficulty, CaseNote } from '../types';\nimport { mockPatients } from '../data/mockData';\n\n// Estado inicial\ninterface AppState {\n  user: User;\n  cases: Case[];\n  currentCase: Case | null;\n  isLoading: boolean;\n}\n\nconst initialState: AppState = {\n  user: {\n    level: 1,\n    xp: 0,\n    maxXp: 100,\n    coins: 50, // Monedas iniciales\n    streak: 0,\n    lastPlayedDate: null,\n    isPremium: false,\n    casesCompleted: 0,\n    totalQuestions: 0,\n    correctDiagnoses: 0,\n    unlockedSkins: ['default'],\n    settings: {\n      theme: 'light',\n      fontSize: 'medium',\n      soundEnabled: true,\n      vibrationEnabled: true,\n      notificationsEnabled: true,\n    },\n  },\n  cases: [],\n  currentCase: null,\n  isLoading: true,\n};\n\n// Acciones\ntype AppAction =\n  | { type: 'SET_LOADING'; payload: boolean }\n  | { type: 'SET_USER'; payload: Partial<User> }\n  | { type: 'SET_CASES'; payload: Case[] }\n  | { type: 'ADD_CASE'; payload: Case }\n  | { type: 'UPDATE_CASE'; payload: { id: string; updates: Partial<Case> } }\n  | { type: 'REMOVE_CASE'; payload: string }\n  | { type: 'SET_CURRENT_CASE'; payload: Case | null }\n  | { type: 'ADD_XP'; payload: number }\n  | { type: 'ADD_COINS'; payload: number }\n  | { type: 'SPEND_COINS'; payload: number }\n  | { type: 'UPDATE_STREAK' }\n  | { type: 'COMPLETE_CASE'; payload: { caseId: string; correct: boolean; xpGained: number; coinsGained: number } };\n\n// Reducer\nconst appReducer = (state: AppState, action: AppAction): AppState => {\n  switch (action.type) {\n    case 'SET_LOADING':\n      return { ...state, isLoading: action.payload };\n    \n    case 'SET_USER':\n      return { ...state, user: { ...state.user, ...action.payload } };\n    \n    case 'SET_CASES':\n      return { ...state, cases: action.payload };\n    \n    case 'ADD_CASE':\n      return { ...state, cases: [...state.cases, action.payload] };\n    \n    case 'UPDATE_CASE':\n      return {\n        ...state,\n        cases: state.cases.map(case_ => \n          case_.id === action.payload.id \n            ? { ...case_, ...action.payload.updates }\n            : case_\n        ),\n        currentCase: state.currentCase?.id === action.payload.id \n          ? { ...state.currentCase, ...action.payload.updates }\n          : state.currentCase,\n      };\n    \n    case 'SET_CURRENT_CASE':\n      return { ...state, currentCase: action.payload };\n    \n    case 'ADD_XP':\n      const newXp = state.user.xp + action.payload;\n      let newLevel = state.user.level;\n      let newMaxXp = state.user.maxXp;\n      \n      // Verificar si sube de nivel\n      if (newXp >= newMaxXp) {\n        newLevel += 1;\n        newMaxXp = Math.floor(newMaxXp * 1.2);\n      }\n      \n      return {\n        ...state,\n        user: {\n          ...state.user,\n          xp: newXp,\n          level: newLevel,\n          maxXp: newMaxXp,\n        },\n      };\n    \n    case 'REMOVE_CASE':\n      return {\n        ...state,\n        cases: state.cases.filter(case_ => case_.id !== action.payload),\n      };\n\n    case 'ADD_COINS':\n      return {\n        ...state,\n        user: {\n          ...state.user,\n          coins: state.user.coins + action.payload,\n        },\n      };\n\n    case 'SPEND_COINS':\n      return {\n        ...state,\n        user: {\n          ...state.user,\n          coins: Math.max(0, state.user.coins - action.payload),\n        },\n      };\n\n    case 'UPDATE_STREAK':\n      const today = new Date().toDateString();\n      const lastPlayed = state.user.lastPlayedDate;\n      let newStreak = state.user.streak;\n\n      if (lastPlayed) {\n        const lastDate = new Date(lastPlayed);\n        const yesterday = new Date();\n        yesterday.setDate(yesterday.getDate() - 1);\n\n        if (lastDate.toDateString() === yesterday.toDateString()) {\n          newStreak += 1;\n        } else if (lastDate.toDateString() !== today) {\n          newStreak = 1;\n        }\n      } else {\n        newStreak = 1;\n      }\n\n      return {\n        ...state,\n        user: {\n          ...state.user,\n          streak: newStreak,\n          lastPlayedDate: today,\n        },\n      };\n\n    case 'COMPLETE_CASE':\n      return {\n        ...state,\n        user: {\n          ...state.user,\n          casesCompleted: state.user.casesCompleted + 1,\n          correctDiagnoses: action.payload.correct\n            ? state.user.correctDiagnoses + 1\n            : state.user.correctDiagnoses,\n          xp: state.user.xp + action.payload.xpGained,\n          coins: state.user.coins + action.payload.coinsGained,\n        },\n        cases: state.cases.map(case_ =>\n          case_.id === action.payload.caseId\n            ? { ...case_, status: 'completed' as const }\n            : case_\n        ),\n      };\n\n    default:\n      return state;\n  }\n};\n\n// Contexto\nconst AppContext = createContext<{\n  state: AppState;\n  dispatch: React.Dispatch<AppAction>;\n  addMessage: (caseId: string, message: Message) => void;\n  createNewCase: (patient: Patient) => Case;\n  generateId: () => string;\n} | null>(null);\n\n// Hook personalizado\nexport const useApp = () => {\n  const context = useContext(AppContext);\n  if (!context) {\n    throw new Error('useApp debe ser usado dentro de AppProvider');\n  }\n  return context;\n};\n\n// Provider\ninterface AppProviderProps {\n  children: ReactNode;\n}\n\nexport const AppProvider: React.FC<AppProviderProps> = ({ children }) => {\n  const [state, dispatch] = useReducer(appReducer, initialState);\n\n  // Función para generar ID único\n  const generateId = (): string => {\n    return Math.random().toString(36).substr(2, 9);\n  };\n\n  // Función para crear nuevo caso\n  const createNewCase = (patient: Patient, difficulty: CaseDifficulty = 'normal', isFromFamily: boolean = false): Case => {\n    const newCase: Case = {\n      id: generateId(),\n      patient,\n      messages: [],\n      status: 'new',\n      difficulty,\n      lastMessage: '',\n      lastMessageTime: '',\n      unreadCount: 0,\n      sessions: 0,\n      questionsThisSession: 0,\n      backstoryRevealed: false,\n      selectedSymptoms: [],\n      notes: [],\n      diagnosis: null,\n      diagnosisCorrect: null,\n      treatment: null,\n      treatmentSentDate: null,\n      batteryApplied: null,\n      batteryResults: null,\n      sessionId: null,\n      isFromFamily,\n      rapport: difficulty === 'realista' ? 50 : 70,\n      createdAt: new Date().toISOString(),\n    };\n    return newCase;\n  };\n\n  // Función para añadir mensaje\n  const addMessage = (caseId: string, message: Message) => {\n    const case_ = state.cases.find(c => c.id === caseId);\n    if (case_) {\n      const updatedMessages = [...case_.messages, message];\n      dispatch({\n        type: 'UPDATE_CASE',\n        payload: {\n          id: caseId,\n          updates: {\n            messages: updatedMessages,\n            lastMessage: message.text,\n            lastMessageTime: new Date().toLocaleTimeString(),\n          },\n        },\n      });\n    }\n  };\n\n  // Cargar datos al iniciar\n  useEffect(() => {\n    const loadData = async () => {\n      try {\n        // Cargar usuario\n        const userData = await AsyncStorage.getItem('@psykat_user');\n        if (userData) {\n          dispatch({ type: 'SET_USER', payload: JSON.parse(userData) });\n        }\n\n        // Cargar casos\n        const casesData = await AsyncStorage.getItem('@psykat_cases');\n        if (casesData) {\n          dispatch({ type: 'SET_CASES', payload: JSON.parse(casesData) });\n        } else {\n          // Crear casos iniciales si no existen\n          const initialCases = mockPatients.slice(0, 3).map(patient => createNewCase(patient));\n          dispatch({ type: 'SET_CASES', payload: initialCases });\n        }\n      } catch (error) {\n        console.error('Error cargando datos:', error);\n      } finally {\n        dispatch({ type: 'SET_LOADING', payload: false });\n      }\n    };\n\n    loadData();\n  }, []);\n\n  // Guardar datos cuando cambian\n  useEffect(() => {\n    const saveData = async () => {\n      try {\n        await AsyncStorage.setItem('@psykat_user', JSON.stringify(state.user));\n        await AsyncStorage.setItem('@psykat_cases', JSON.stringify(state.cases));\n      } catch (error) {\n        console.error('Error guardando datos:', error);\n      }\n    };\n\n    if (!state.isLoading) {\n      saveData();\n    }\n  }, [state.user, state.cases, state.isLoading]);\n\n  return (\n    <AppContext.Provider value={{\n      state,\n      dispatch,\n      addMessage,\n      createNewCase,\n      generateId,\n    }}>\n      {children}\n    </AppContext.Provider>\n  );\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}